{% extends 'pages/index.html' %}
{% load static %}

{% block content %}
<div class="container update-profile-form">
    <h1>Edit Author Profile</h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}
        
        <div class="update-profile-section">
            <div class="update-profile-picture">
                {% if form.instance.picture %}
                    <img src="{{ form.instance.picture.url }}" alt="Profile Picture" class="update-profile-picture">
                {% else %}
                    <img src="{% static 'images/Person-Icon.jpg' %}" alt="Default Profile Picture" class="update-profile-picture">
                {% endif %}
                <br>
                <label for="id_new_picture">Change Profile Picture:</label>
                <div class="file-upload">
                    {{ form.picture }}
                </div>
                {% if form.picture.errors %}
                    {% for error in form.picture.errors %}
                        <span class="text-danger">{{ error }}</span><br>
                    {% endfor %}
                {% endif %}

                {% if form.instance.picture %}
                    <div class="checkbox-container">
                        <input type="checkbox" name="clear_picture" id="id_clear_picture">
                        <label for="id_clear_picture">Clear current picture</label>
                    </div>
                {% endif %}
            </div>

            <div class="update-profile-details">
                <!-- Basic Information -->
                <div class="update-profile-form-group">
                    <label for="id_first_name">First Name:</label>
                    {{ form.first_name }}
                    {% if form.first_name.errors %}
                        {% for error in form.first_name.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_last_name">Last Name:</label>
                    {{ form.last_name }}
                    {% if form.last_name.errors %}
                        {% for error in form.last_name.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_nationality">Nationality:</label>
                    {{ form.nationality }}
                    {% if form.nationality.errors %}
                        {% for error in form.nationality.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_date_of_birth">Date of Birth:</label>
                    {{ form.date_of_birth }}
                    {% if form.date_of_birth.errors %}
                        {% for error in form.date_of_birth.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% else %}
                        <small class="text-muted">Format: YYYY-MM-DD (e.g., 1990-12-31)</small>
                    {% endif %}
                </div>

                <!-- Contact Information -->
                <div class="update-profile-form-group">
                    <label for="id_email">Email:</label>
                    {{ form.email }}
                    {% if form.email.errors %}
                        {% for error in form.email.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_phone_number">Phone Number:</label>
                    {{ form.phone_number }}
                    {% if form.phone_number.errors %}
                        {% for error in form.phone_number.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_mailing_address">Mailing Address:</label>
                    {{ form.mailing_address }}
                    {% if form.mailing_address.errors %}
                        {% for error in form.mailing_address.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Biography and Awards & Recognitions -->
                <div class="update-profile-form-group">
                    <label for="id_biography">Biography:</label>
                    {{ form.biography }}
                    {% if form.biography.errors %}
                        {% for error in form.biography.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_awards_recognitions">Awards & Recognitions:</label>
                    {{ form.awards_recognitions }}
                    {% if form.awards_recognitions.errors %}
                        {% for error in form.awards_recognitions.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Social Media Links -->
                <div class="update-profile-form-group">
                    <label for="id_social_media_twitter">Social Media (Twitter):</label>
                    {{ form.social_media_twitter }}
                    {% if form.social_media_twitter.errors %}
                        {% for error in form.social_media_twitter.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_social_media_facebook">Social Media (Facebook):</label>
                    {{ form.social_media_facebook }}
                    {% if form.social_media_facebook.errors %}
                        {% for error in form.social_media_facebook.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-profile-form-group">
                    <label for="id_social_media_linkedin">Social Media (LinkedIn):</label>
                    {{ form.social_media_linkedin }}
                    {% if form.social_media_linkedin.errors %}
                        {% for error in form.social_media_linkedin.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Current Publisher -->
                <div class="update-profile-form-group">
                    <label for="id_current_publisher">Current Publisher:</label>
                    {{ form.current_publisher }}
                    {% if form.current_publisher.errors %}
                        {% for error in form.current_publisher.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Past Publishers -->
                <div class="update-profile-form-group">
                    <label for="id_past_publishers">Past Publishers:</label>
                    {{ form.past_publishers }}
                    {% if form.past_publishers.errors %}
                        {% for error in form.past_publishers.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Is Deceased -->
                <div class="update-profile-form-group">
                    <label for="id_is_deceased">Is Deceased:</label>
                    {{ form.is_deceased }}
                    {% if form.is_deceased.errors %}
                        {% for error in form.is_deceased.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Pen Names -->
                <div class="update-profile-form-group">
                    <label for="id_pen_names">Pen Names:</label>
                    {{ form.pen_names }}
                    {% if form.pen_names.errors %}
                        {% for error in form.pen_names.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <!-- Current Pen Names Display -->
                <div class="update-profile-form-group">
                    <label for="current_pen_names">Current Pen Names:</label>
                    <ul id="current_pen_names">
                        {% for pen_name in form.instance.pen_names.all %}
                            <li>{{ pen_name.pen_name }}</li>
                        {% endfor %}
                    </ul>
                </div>

                <!-- Submit Button -->
                <div class="update-profile-form-group">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock %}
