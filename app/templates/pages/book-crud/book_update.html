
{% extends 'pages/index.html' %}
{% load static %}

{% block content %}

<div class="container update-book-form">
    <h1>Edit Book</h1>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="update-book-section">
            <div class="update-book-picture">
                {% if form.instance.book_cover_image %}
                <img src="{{ form.instance.book_cover_image.url }}" alt="Book Cover" class="update-book-picture">
                {% else %}
                <img src="{% static 'images/Person-Icon.jpg' %}" alt="Default Book Cover" class="update-book-picture">
                {% endif %}
                <br>
                <label for="id_book_picture">Change Book Cover:</label>
                <div class="file-upload">
                    {{ form.book_cover_image }}
                </div>
                {% if form.book_cover_image.errors %}
                    {% for error in form.book_cover_image.errors %}
                        <span class="text-danger">{{ error }}</span><br>
                    {% endfor %}
                {% endif %}

                {% if form.instance.series_cover_image %}
                    <img src="{{ form.instance.series_cover_image.url }}" alt="Series Cover" class="series-cover-picture">
                {% else %}
                    <img src="{% static 'images/Person-Icon.jpg' %}" alt="Default Series Cover" class="series-cover-picture">
                {% endif %}
                <br>
                <label for="id_series_cover_image">Change Series Cover:</label>
                <div class="file-upload">
                    {{ form.series_cover_image }}
                </div>
                {% if form.series_cover_image.errors %}
                    {% for error in form.series_cover_image.errors %}
                        <span class="text-danger">{{ error }}</span><br>
                    {% endfor %}
                {% endif %}
            </div>

            <div class="update-book-details">

                <div class="update-book-form-group">
                    <label for="id_title">Title:</label>
                    {{ form.title }}
                    {% if form.title.errors %}
                        {% for error in form.title.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_series">Series:</label>
                    {{ form.series }}
                    {% if form.series.errors %}
                        {% for error in form.series.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_publication_date">Publication Date:</label>
                    {{ form.publication_date }}
                    {% if form.publication_date.errors %}
                        {% for error in form.publication_date.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% else %}
                        <small class="text-muted">Format: YYYY-MM-DD (e.g., 2022-01-01)</small>
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_volume">Volume:</label>
                    {{ form.volume }}
                    {% if form.volume.errors %}
                        {% for error in form.volume.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_isbn">ISBN:</label>
                    {{ form.isbn }}
                    {% if form.isbn.errors %}
                        {% for error in form.isbn.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_description">Description:</label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        {% for error in form.description.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_edition_file">Edition:</label>
                    {{ form.edition }}
                    {% if form.edition.errors %}
                        {% for error in form.edition.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_language">Language:</label>
                    {{ form.language }}
                    {% if form.language.errors %}
                        {% for error in form.language.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_authors">Authors:</label>
                    <div class="select-instructions">
                        * Hold Ctrl to select multiple Authors
                    </div>
                    {{ form.authors }}
                    {% if form.authors.errors %}
                        {% for error in form.authors.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_genres">Genres:</label>
                    <div class="select-instructions">
                        * Hold Ctrl to select multiple Genres
                    </div>
                    {{ form.genres }}
                    {% if form.genres.errors %}
                        {% for error in form.genres.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_collaborating_publishers">Collaborating Publishers:</label>
                    <div class="select-instructions">
                        * Hold Ctrl to select multiple Publishers
                    </div>
                    {{ form.collaborating_publishers }}
                    {% if form.collaborating_publishers.errors %}
                        {% for error in form.collaborating_publishers.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_ebook_file">Ebook File:</label>
                    {{ form.ebook_file }}
                    {% if form.ebook_file.errors %}
                        {% for error in form.ebook_file.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_audiobook_file">Audiobook File:</label>
                    {{ form.audiobook_file }}
                    {% if form.audiobook_file.errors %}
                        {% for error in form.audiobook_file.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <label for="id_audiobook_duration">Audiobook Duration (HH:MM:SS):</label>
                    {{ form.audiobook_duration }}
                    {% if form.audiobook_duration.errors %}
                        {% for error in form.audiobook_duration.errors %}
                            <span class="text-danger">{{ error }}</span><br>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="update-book-form-group">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </div>
    </form>
</div>

{% endblock %}
